(this["webpackJsonppointillism-converter"]=this["webpackJsonppointillism-converter"]||[]).push([[0],{14:function(e,t){},15:function(e,t){},27:function(e,t,n){},28:function(e,t,n){},37:function(e,t){},54:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(20),i=n.n(c),s=(n(27),n(2)),o=(n(28),n(5)),u=n(0);var l=function(e){var t=e.steps,n=e.currentStep,a=Object(r.useState)(0),c=Object(s.a)(a,2),i=c[0],l=c[1];return Object(r.useEffect)((function(){var e=Object(o.findIndex)(t,(function(e){return e===n}));l(-1===e?0:e)}),[n]),Object(u.jsx)("ul",{className:"w-full steps",children:t.map((function(e,t){return t<=i?Object(u.jsx)("li",{className:"step step-success text-neutral-content",children:e},e):Object(u.jsx)("li",{className:"step text-neutral-content",children:e},e)}))})};var f=function(e){var t=e.onChange;return Object(u.jsxs)("label",{className:"w-full flex flex-col items-center px-4 py-6 bg-white text-primary rounded-lg shadow-lg tracking-wide uppercase border-2 border-primary transition duration-300 ease-in-out bg-opacity-50 cursor-pointer hover:bg-primary hover:text-white",children:[Object(u.jsx)("svg",{className:"w-8 h-8",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:Object(u.jsx)("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),Object(u.jsx)("span",{className:"mt-2 leading-normal",children:"Select a file"}),Object(u.jsx)("input",{type:"file",className:"hidden",onChange:t})]})};var d=function(e){var t=e.width,n=void 0===t?"w-28":t,r=e.height,a=void 0===r?"w-28":r;return Object(u.jsx)("svg",{className:"".concat(n," ").concat(a),version:"1.1",id:"L9",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",children:Object(u.jsx)("path",{fill:"white",d:"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50",children:Object(u.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})})})};var b=function(e){var t=e.value,n=(e.label,e.onChange),r=e.min,a=void 0===r?1:r,c=e.max,i=void 0===c?100:c,s=e.step,o=void 0===s?1:s;return Object(u.jsxs)("div",{className:"w-full",children:[Object(u.jsxs)("div",{className:"flex justify-between",children:[Object(u.jsx)("label",{children:"More Artistic"}),Object(u.jsx)("label",{children:"More Realistic"})]}),Object(u.jsx)("input",{type:"range",onChange:function(e){return n(e.target.value)},min:a,max:i,value:t,step:o,className:"range range-primary"}),Object(u.jsx)("span",{children:t})]})};var j=function(){return Object(u.jsx)("footer",{className:"p-4 footer bg-base-300 text-base-content footer-center p-6",children:Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:" 2021 - Made By Guillaume Gomez"})})})};var h=function(){return Object(u.jsxs)("div",{className:"navbar mb-2 bg-accent text-neutral-content p-6",children:[Object(u.jsx)("div",{className:"px-2 mx-2 navbar-start",children:Object(u.jsx)("span",{className:"text-2xl font-bold",children:"Pointillism"})}),Object(u.jsx)("div",{className:"navbar-end",children:Object(u.jsx)("a",{"aria-label":"Github",target:"_blank",href:"https://github.com/guillaume-gomez/to-pointillism",className:"btn btn-square btn-ghost",children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"inline-block w-6 h-6 fill-current",children:Object(u.jsx)("path",{d:"M256,32C132.3,32,32,134.9,32,261.7c0,101.5,64.2,187.5,153.2,217.9a17.56,17.56,0,0,0,3.8.4c8.3,0,11.5-6.1,11.5-11.4,0-5.5-.2-19.9-.3-39.1a102.4,102.4,0,0,1-22.6,2.7c-43.1,0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1,1.4-14.1h.1c22.5,2,34.3,23.8,34.3,23.8,11.2,19.6,26.2,25.1,39.6,25.1a63,63,0,0,0,25.6-6c2-14.8,7.8-24.9,14.2-30.7-49.7-5.8-102-25.5-102-113.5,0-25.1,8.7-45.6,23-61.6-2.3-5.8-10-29.2,2.2-60.8a18.64,18.64,0,0,1,5-.5c8.1,0,26.4,3.1,56.6,24.1a208.21,208.21,0,0,1,112.2,0c30.2-21,48.5-24.1,56.6-24.1a18.64,18.64,0,0,1,5,.5c12.2,31.6,4.5,55,2.2,60.8,14.3,16.1,23,36.6,23,61.6,0,88.2-52.4,107.6-102.3,113.3,8,7.1,15.2,21.1,15.2,42.5,0,30.7-.3,55.5-.3,63,0,5.4,3.1,11.5,11.4,11.5a19.35,19.35,0,0,0,4-.4C415.9,449.2,480,363.1,480,261.7,480,134.9,379.7,32,256,32Z"})})})})]})};var p=function(e){var t=e.toggleCanvas,n=e.title,a=e.canvasId,c=e.collapsible,i=Object(r.useRef)(null),s=Object(r.useRef)(null);return Object(u.jsxs)("div",{className:"card glass text-neutral-content collapse w-full border rounded-box border-base-300 collapse-arrow ".concat(c?"":"collapse-close"),children:[Object(u.jsx)("input",{type:"checkbox",onClick:function(){return t()}}),Object(u.jsx)("div",{className:"collapse-title text-xl font-medium",children:n}),Object(u.jsxs)("div",{className:"collapse-content flex flex-col justify-center gap-3",children:[Object(u.jsx)("canvas",{ref:i,className:"max-w-full",id:a}),Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"flex flex-row-reverse",children:Object(u.jsx)("a",{ref:s,className:"btn btn-primary",onClick:function(){if(i.current&&s.current){var e=i.current.toDataURL("image/png");s.current.download="image.png",s.current.href=e.replace(/^data:image\/[^;]/,"data:application/octet-stream");window.open("about:blank","image from canvas")}},children:"Save"})})})]})]})},m=n(1),v=n.n(m);var x=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){v.a.onRuntimeInitialized=function(){return a(!0)}}),[a]),{openCVLoaded:n,cv:v.a}},O=n(4),g=n.n(O),w=n(6),y=n(21);function N(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function M(e,t){return(e%t+t)%t}function C(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=n/2>>0,a=[],c=0;c<t;c+=n)for(var i=0;i<e;i+=n){var s=N(-r,r)+c,u=N(-r,r)+i;a.push([M(s,t),M(u,e)])}return Object(o.shuffle)(a)}function S(e,t,n,r){return t.slice(n,r).map((function(t){var n=Object(s.a)(t,2),r=n[0],a=n[1];return e.ucharPtr(r,a)}))}function R(e,t){var n=Math.random(),r=Object(y.bisect_left)(e,n);return r<t.length?t[r]:t[t.length-1]}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9,r=B(e,t),a=F(r),c=(r=G(a,r)).map((function(e){return Object(o.sum)(e)}));return r=L(c,r),c=(r=A(n*t.length,r)).map((function(e){return Object(o.sum)(e)})),E(r=L(c,r))}function B(e,t){return e.map((function(e){return t.map((function(t){return function(e,t){var n=Object(s.a)(e,3),r=n[0],a=n[1],c=n[2],i=Object(s.a)(t,3),o=i[0],u=i[1],l=i[2];return Math.sqrt(Math.pow(r-o,2)+Math.pow(a-u,2)+Math.pow(c-l,2))}(e,t)}))}))}function F(e){return e.map((function(e){return Object(o.max)(e)}))}function G(e,t){return t.map((function(t,n){return t.map((function(t){return e[n]-t}))}))}function L(e,t){return t.map((function(t,n){return t.map((function(t){return t/e[n]}))}))}function A(e,t){return t.map((function(t){return t.map((function(t){return Math.exp(t*e)}))}))}function E(e){return e.map((function(e){return e.map((t=0,function(e){return t+=e}));var t}))}var I=n(9),P=n(22),T=n(8),_=n.n(T);function V(e){return(new P.a).getPalette(e,20)}function D(e){var t=e.map((function(e){var t=Object(s.a)(e,3),n=t[0],r=t[1],a=t[2],c=_.a.rgb.hsl(n,r,a),i=Object(s.a)(c,3),o=i[0],u=i[1],l=i[2],f=function(e,t){var n=Object(s.a)(e,3),r=n[0],a=n[1],c=n[2];return[r,Math.min(100,a+t),c]}([o,u,l],20),d=Object(s.a)(f,3),b=(d[0],d[1]);d[2];return _.a.hsl.rgb([o,b,l])}));function n(){return e.map((function(e){var t=Object(s.a)(e,3),n=t[0],r=t[1],a=t[2],c=40*Math.random()-20,i=_.a.rgb.hsl(n,r,a),o=Object(s.a)(i,3),u=o[0],l=o[1],f=o[2],d=function(e,t){var n,r=Object(s.a)(e,3),a=r[0],c=r[1],i=r[2];return[((a+t)%(n=360)+n)%n,c,i]}([u,l,f],c),b=Object(s.a)(d,3),j=b[0];b[1],b[2];return _.a.hsl.rgb([j,l,f])}))}return[].concat(Object(I.a)(e.slice(0)),Object(I.a)(t),Object(I.a)(n()),Object(I.a)(n()))}function z(e,t){var n=document.getElementById(e);if(!n.getContext)throw"cannot find canvas to draw palette";for(var r=n.getContext("2d"),a=n.width/20,c=a,i=t.length/20,o=0;o<i;++o)for(var u=0;u<20;++u){var l=Object(s.a)(t[u+20*o],3),f=l[0],d=l[1],b=l[2];r.fillStyle="rgb(".concat(f,", ").concat(d,", ").concat(b,")"),r.fillRect(a*u,c*o,a,c)}}function U(e){var t=new v.a.Mat(e.cols,e.rows,v.a.CV_8UC4);return v.a.cvtColor(e,t,v.a.COLOR_RGB2GRAY),t}function X(e,t){function n(e,t){return e.map((function(e){return e/t}))}var r=new v.a.Mat,a=new v.a.Mat;v.a.Scharr(e,r,v.a.CV_32F,1,0,1,0,v.a.BORDER_DEFAULT),v.a.Scharr(e,a,v.a.CV_32F,0,1,1,0,v.a.BORDER_DEFAULT);var c=v.a.matFromArray(r.rows,r.cols,v.a.CV_32F,n(r.data32F,t)),i=v.a.matFromArray(a.rows,a.cols,v.a.CV_32F,n(a.data32F,t));return r.delete(),a.delete(),[c,i]}function Y(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=2*n+1,c=new v.a.Size(a,a),i=new v.a.Mat,s=new v.a.Mat,o=0;o<r;++o)v.a.GaussianBlur(e,i,c,0,0,v.a.BORDER_DEFAULT),v.a.GaussianBlur(t,s,c,0,0,v.a.BORDER_DEFAULT);return[i,s]}function q(e,t,n,r){return Math.atan2(t.floatAt(n,r),e.floatAt(n,r))}function J(e,t,n,r){return Math.hypot(e.floatAt(n,r),t.floatAt(n,r))}function H(e){return e*(180/Math.PI)}var Z=["drawPalette","greyOutput","canvasOutputX","canvasOutputY","canvasOutputXSmooth","canvasOutputYSmooth","medianBlur","finalResult"],K=["palette","grey","gradiants","gradiantSmooth","medianBlur","generateGrid","done"];function Q(e){return W.apply(this,arguments)}function W(){return(W=Object(w.a)(g.a.mark((function e(t){var n,r=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:2e3,e.abrupt("return",new Promise((function(e){var r=V(t);r=D(r),z(Z[0],r),setTimeout((function(){return e(r)}),n)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(w.a)(g.a.mark((function e(t,n){var r,a=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:2e3,e.abrupt("return",new Promise((function(e){var a=U(n);t.imshow(Z[1],a),setTimeout((function(){return e(a)}),r)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,n){return ne.apply(this,arguments)}function ne(){return(ne=Object(w.a)(g.a.mark((function e(t,n,r){var a,c=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:2e3,e.abrupt("return",new Promise((function(e){var c=X(n,r);t.imshow(Z[2],c[0]),t.imshow(Z[3],c[1]),setTimeout((function(){return e(c)}),a)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t,n,r,a){return ae.apply(this,arguments)}function ae(){return(ae=Object(w.a)(g.a.mark((function e(t,n,r,a,c){var i,s=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>5&&void 0!==s[5]?s[5]:2e3,e.abrupt("return",new Promise((function(e){var s=Math.round(Math.max(n,r)/50),o=Y(a,c,s);t.imshow(Z[4],o[0]),t.imshow(Z[5],o[1]),setTimeout((function(){return e(o)}),i)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(w.a)(g.a.mark((function e(t,n){var r,a=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:2e3,e.abrupt("return",new Promise((function(e){var a=t.Mat.zeros(n.cols,n.rows,t.CV_32F);t.medianBlur(n,a,11),t.imshow(Z[6],a),setTimeout((function(){return e(a)}),r)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t,n,r,a,c,i){return oe.apply(this,arguments)}function oe(){return(oe=Object(w.a)(g.a.mark((function e(t,n,r,a,c,i,u){var l,f,d,b=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=b.length>7&&void 0!==b[7]?b[7]:2e3,f=1e3,d=Math.floor(Math.max(n.rows,n.cols)/1e3),e.abrupt("return",new Promise((function(e){Object(o.range)(0,i.length,f).forEach((function(e){var o=k(S(n,i,e,e+f),u);i.slice(e,Math.min(e+f,i.length)).forEach((function(e,n){var i=Object(s.a)(e,2),l=i[0],f=i[1],b=R(o[n],u),j=H(q(a,c,l,f))+90,h=Math.round(d+d*Math.sqrt(J(a,c,l,f))),p=new t.Scalar(b[0],b[1],b[2],255);t.ellipse(r,new t.Point(f,l),new t.Size(h,d),j,0,360,p,-1,t.LINE_AA)}))})),t.imshow(Z[7],r),setTimeout((function(){return e("ok")}),l)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(w.a)(g.a.mark((function e(t,n,r,a){var c,i,o,u,l,f,d,b,j,h,p,m,v,x,O=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=O.length>4&&void 0!==O[4]?O[4]:2e3,e.next=3,Q(n);case 3:return i=e.sent,a("palette"),e.next=7,t.imread(n);case 7:return o=e.sent,e.next=10,$(t,o,c);case 10:return u=e.sent,a("grey"),e.next=14,te(t,u,r,c);case 14:return l=e.sent,f=Object(s.a)(l,2),d=f[0],b=f[1],a("gradiants"),e.next=21,re(t,o.rows,o.cols,d,b,c);case 21:return j=e.sent,h=Object(s.a)(j,2),p=h[0],m=h[1],a("gradiantSmooth"),u.delete(),d.delete(),b.delete(),e.next=31,ce(t,o,c);case 31:return v=e.sent,a("medianBlur"),x=C(o.cols,o.rows),setTimeout((function(){return a("generateGrid")}),c),e.next=37,se(t,o,v,p,m,x,i,c);case 37:a("done"),o.delete(),v.delete(),p.delete(),m.delete();case 42:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=["Generate Palette","Grey Scale Image","Gradient on X axis","Gradient on Y axis","Gradient on X axis Smooth","Gradient on Y axis Smooth","Generate Median Blur Image","Final Result"],fe=[!1,!1,!1,!1,!1,!1,!1,!1];var de=function(){var e=x(),t=e.cv,n=e.openCVLoaded,a=Object(r.useRef)(null),c=Object(r.useRef)(null),i=(Object(r.useRef)([]),Object(r.useState)("")),o=Object(s.a)(i,2),m=o[0],v=o[1],O=Object(r.useState)(!1),g=Object(s.a)(O,2),w=g[0],y=g[1],N=Object(r.useState)(!1),M=Object(s.a)(N,2),C=M[0],S=M[1],R=Object(r.useState)(100),k=Object(s.a)(R,2),B=k[0],F=k[1],G=Object(r.useState)(fe),L=Object(s.a)(G,2),A=L[0],E=L[1];function I(e){e&&e.target&&e.target.files&&a.current&&(a.current.src=URL.createObjectURL(e.target.files[0]))}function P(e){v(e)}function T(){v(""),E(fe),S(!0)}function _(e){var t=A.map((function(t,n){return e===n?!t:t}));E(t)}return Object(r.useEffect)((function(){C&&a.current&&function(e,t,n,r){return ue.apply(this,arguments)}(t,a.current,B/100,P).then((function(){S(!1),c.current&&c.current.scrollIntoView({behavior:"smooth"})}))}),[t,C]),Object(u.jsx)("div",{className:"bg-img",children:Object(u.jsxs)("div",{className:"container mx-auto flex flex-col gap-10 bg-neutral",children:[Object(u.jsx)(h,{}),Object(u.jsxs)("div",{className:"flex flex-col px-4 flex flex-col gap-5",children:[n?function(){var e=C?Object(u.jsx)("div",{className:"flex justify-center",children:Object(u.jsx)(d,{width:"w-80"})}):Object(u.jsxs)("div",{className:"flex flex-col items-center gap-3 w-full p-4",children:[Object(u.jsx)("h2",{className:"flex self-start text-xl font-bold",children:"Settings"}),Object(u.jsx)(f,{onChange:I}),Object(u.jsx)(b,{label:"thickness brush",value:B,min:100,max:1536,onChange:function(e){return F(parseInt(e))}}),Object(u.jsx)("div",{className:"flex self-end",children:Object(u.jsx)("button",{className:"btn btn-primary",disabled:!w,onClick:T,children:"Generate"})})]});return Object(u.jsx)("div",{className:"card glass text-neutral-content",children:e})}():Object(u.jsxs)("div",{className:"flex flex-col items-center",children:[Object(u.jsx)(d,{}),"Loading OpenCV library"]}),Object(u.jsx)("img",{className:"hidden",id:"imageSrc",alt:"No Image",ref:a,onLoad:function(){return y(!0)}}),Object(u.jsxs)("div",{className:"w-full flex flex-col items-center gap-3 pt-5 border rounded-box",children:[Object(u.jsx)("h2",{className:"text-xl font-bold text-neutral-content",children:"Results"}),Object(u.jsx)(l,{steps:K,currentStep:m}),Z.map((function(e,t){return"finalResult"===e?Object(u.jsx)("div",{className:"w-full",ref:c,children:Object(u.jsx)(p,{toggleCanvas:function(){return _(t)},title:le[t],canvasId:e,collapsible:w})},e):Object(u.jsx)(p,{toggleCanvas:function(){return _(t)},title:le[t],canvasId:e,collapsible:w})}))]})]}),Object(u.jsx)(j,{})]})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(de,{})}),document.getElementById("root")),be()}},[[54,1,2]]]);
//# sourceMappingURL=main.9f84ee34.chunk.js.map