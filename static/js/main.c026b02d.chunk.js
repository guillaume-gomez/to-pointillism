(this["webpackJsonppointillism-converter"]=this["webpackJsonppointillism-converter"]||[]).push([[0],{13:function(t,e){},14:function(t,e){},27:function(t,e,n){},28:function(t,e,n){},35:function(t,e){},54:function(t,e,n){"use strict";n.r(e);var r=n(3),a=n.n(r),c=n(19),o=n.n(c),u=(n(27),n(1)),i=n.p+"static/media/logo.6ce24c58.svg",l=(n(28),n(0)),s=n.n(l);var f=function(){var t=Object(r.useState)(!1),e=Object(u.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){s.a.onRuntimeInitialized=function(){return a(!0)}}),[a]),{openCVLoaded:n,cv:s.a}},h=n(11),j=n.n(h),d=n(20),p=n(4),b=n(7),g=n(21),m=n(6),O=n.n(m);var v=n(22);function M(t){return(new g.a).getPalette(t,20)}function w(t){var e=t.map((function(t){var e=Object(u.a)(t,3),n=e[0],r=e[1],a=e[2],c=O.a.rgb.hsl(n,r,a),o=Object(u.a)(c,3),i=o[0],l=o[1],s=o[2],f=function(t,e){var n=Object(u.a)(t,3),r=n[0],a=n[1],c=n[2];return[r,Math.min(100,a+e),c]}([i,l,s],20),h=Object(u.a)(f,3),j=(h[0],h[1]);h[2];return O.a.hsl.rgb([i,j,s])}));function n(){return t.map((function(t){var e=Object(u.a)(t,3),n=e[0],r=e[1],a=e[2],c=40*Math.random()-20,o=O.a.rgb.hsl(n,r,a),i=Object(u.a)(o,3),l=i[0],s=i[1],f=i[2],h=function(t,e){var n,r=Object(u.a)(t,3),a=r[0],c=r[1],o=r[2];return[((a+e)%(n=360)+n)%n,c,o]}([l,s,f],c),j=Object(u.a)(h,3),d=j[0];j[1],j[2];return O.a.hsl.rgb([d,s,f])}))}return[].concat(Object(b.a)(t.slice(0)),Object(b.a)(e),Object(b.a)(n()),Object(b.a)(n()))}function x(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function A(t,e){return(t%e+e)%e}function F(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=n/2>>0,a=[],c=0;c<e;c+=n)for(var o=0;o<t;o+=n){var u=x(-r,r)+c,i=x(-r,r)+o;a.push([A(u,e),A(i,t)])}return Object(p.shuffle)(a)}function R(t,e,n,r){return e.slice(n,r).map((function(e){var n=Object(u.a)(e,2),r=n[0],a=n[1];return t.ucharPtr(r,a)}))}function C(t,e){return t.map((function(t){return e.map((function(e){return function(t,e){var n=Object(u.a)(t,3),r=n[0],a=n[1],c=n[2],o=Object(u.a)(e,3),i=o[0],l=o[1],s=o[2];return Math.sqrt(Math.pow(r-i,2)+Math.pow(a-l,2)+Math.pow(c-s,2))}(t,e)}))}))}function E(t){return t.map((function(t){return Object(p.max)(t)}))}function L(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9,r=C(t,e),a=E(r),c=(r=_(a,r)).map((function(t){return Object(p.sum)(t)}));return r=B(c,r),c=(r=S(n*e.length,r)).map((function(t){return Object(p.sum)(t)})),D(r=B(c,r))}function _(t,e){return e.map((function(e,n){return e.map((function(e){return t[n]-e}))}))}function B(t,e){return e.map((function(e,n){return e.map((function(e){return e/t[n]}))}))}function S(t,e){return e.map((function(e){return e.map((function(e){return Math.exp(e*t)}))}))}function D(t){return t.map((function(t){return t.map((e=0,function(t){return e+=t}));var e}))}function y(t,e){var n=Math.random(),r=Object(v.bisect_left)(t,n);return r<e.length?e[r]:e[e.length-1]}function V(t){var e=new s.a.Mat(t.cols,t.rows,s.a.CV_8UC4);return s.a.cvtColor(t,e,s.a.COLOR_RGB2GRAY),e}function T(t){function e(t,e){return t.map((function(t){return t/e}))}var n=new s.a.Mat,r=new s.a.Mat;s.a.Scharr(t,n,s.a.CV_32F,1,0,1,0,s.a.BORDER_DEFAULT),s.a.Scharr(t,r,s.a.CV_32F,0,1,1,0,s.a.BORDER_DEFAULT);var a=s.a.matFromArray(n.rows,n.cols,s.a.CV_32F,e(n.data32F,15.36)),c=s.a.matFromArray(r.rows,r.cols,s.a.CV_32F,e(r.data32F,15.36));return n.delete(),r.delete(),[a,c]}function U(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=2*n+1,c=new s.a.Size(a,a),o=new s.a.Mat,u=new s.a.Mat,i=0;i<r;++i)s.a.GaussianBlur(t,o,c,0,0,s.a.BORDER_DEFAULT),s.a.GaussianBlur(e,u,c,0,0,s.a.BORDER_DEFAULT);return[o,u]}function I(t,e,n,r){return Math.atan2(e.floatAt(n,r),t.floatAt(n,r))}function N(t,e,n,r){return Math.hypot(t.floatAt(n,r),e.floatAt(n,r))}function P(t){return t*(180/Math.PI)}function k(){return(k=Object(d.a)(j.a.mark((function t(e,n,r){var a,c,o,i,l,s,f,h,d,b,g,m,O,v,x,A;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("read image"),a=e.imread(n),console.log("generate palette"),c=w(c=M(n)),console.log("convert to grey"),o=V(a),console.log("create gradient"),i=T(o),l=Object(u.a)(i,2),s=l[0],f=l[1],console.log("create smooth gradiant"),h=Math.round(Math.max(a.rows,a.cols)/50),d=U(s,f,h),b=Object(u.a)(d,2),g=b[0],m=b[1],console.log("generate blur image"),O=e.Mat.zeros(a.cols,a.rows,e.CV_32F),e.medianBlur(a,O,11),console.log("generate random grid"),v=F(a.cols,a.rows),x=1e3,A=Math.floor(Math.max(a.rows,a.cols)/1e3),console.log("begin draw"),Object(p.range)(0,v.length,x).forEach((function(t){setTimeout((function(){console.log("progress"),r(t/v.length*100)}));var n=L(R(a,v,t,t+x),c);v.slice(t,Math.min(t+x,v.length)).forEach((function(t,r){var a=Object(u.a)(t,2),o=a[0],i=a[1],l=y(n[r],c),s=P(I(g,m,o,i))+90,f=Math.round(A+A*Math.sqrt(N(g,m,o,i))),h=new e.Scalar(l[0],l[1],l[2],255);e.ellipse(O,new e.Point(i,o),new e.Size(f,A),s,0,360,h,-1,e.LINE_AA)}))})),console.log("finish"),e.imshow("medianBlur",O),O.delete(),g.delete(),m.delete(),s.delete(),f.delete(),o.delete(),a.delete();case 30:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var z=n(2);var G=function(){var t=f(),e=t.cv,n=t.openCVLoaded,a=Object(r.useRef)(null),c=Object(r.useState)(0),o=Object(u.a)(c,2),l=o[0],s=o[1],h=Object(r.useState)(!1),j=Object(u.a)(h,2),d=j[0],p=j[1];function b(t){s(t)}return Object(r.useEffect)((function(){d&&a.current&&function(t,e,n){k.apply(this,arguments)}(e,a.current,b)}),[e,d]),Object(z.jsx)("div",{className:"App",children:Object(z.jsxs)("header",{className:"App-header",children:[n?Object(z.jsx)("input",{type:"file",onChange:function(t){t&&t.target&&t.target.files&&a.current&&(a.current.src=URL.createObjectURL(t.target.files[0]),p(!1),s(0))}}):null,Object(z.jsx)("img",{src:i,className:"App-logo",alt:"logo"}),Object(z.jsx)("p",{children:"".concat(l.toFixed(2)," %")}),Object(z.jsx)("img",{id:"imageSrc",alt:"No Image",ref:a,onLoad:function(t){p(!0)}}),Object(z.jsx)("canvas",{id:"medianBlur"}),Object(z.jsxs)("p",{children:["Edit ",Object(z.jsx)("code",{children:"src/App.tsx"})," and save to reload."]}),Object(z.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),r(t),a(t),c(t),o(t)}))};o.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(G,{})}),document.getElementById("root")),q()}},[[54,1,2]]]);
//# sourceMappingURL=main.c026b02d.chunk.js.map